
<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8">
<title>jQuery.LazyJaxDavis demo</title>
<meta name="viewport" content="width=1000">
<link rel="stylesheet" href="css/12.refrsh.css">

<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="/jQuery.LazyJaxDavis/lib/davis.js"></script>
<script src="/jQuery.LazyJaxDavis/jquery.lazyjaxdavis.js"></script>
<script src="/jQuery.LazyJaxDavis/demos/simple/common/js/script.js"></script> -->
</head>
<body>
<div class="mod-main" id="">
    <div class="mod-side">
    <ul>
            <li><a href="13.refresh.html">page3</a></li>
            <li><a href="page6.html">page6</a></li>
    </ul>
</div>
    <div id="lazyjaxdavisroot">
    <!-- LazyJaxDavis start -->

        <div class="mod-article">
            333333333333333333333333333
        </div>

    <!-- LazyJaxDavis end -->
    </div>

</div>

<div class="mod-footer">copyright (c) 9999 blah blah blah</div>
<script src="js/jquery-1.10.2.min.js"></script>
<!-- <script src="js/jquery-3.0.0.min.js"></script> -->
<script src="js/davis.min.js"></script>
<script src="js/jquery.lazyjaxdavis.min.js"></script>
<script type="text/javascript">
/*$('#aaa').click(function(event) {
        $(window).load('page6.html');
});*/

console.log(window.history.pushState)
$(function(){

  // define the root of the main content

  new $.LazyJaxDavis(function(router){
    // console.log(router)
    var $root = $('#lazyjaxdavisroot');

    router.option({
      minwaittime: 1800
    });

    router.bind('everyfetchstart', function(page){
      $root.css('opacity', 0.6);
      // window.scrollTo(0, 0);
    });

    router.bind('everyfetchsuccess', function(page){
      $root.css('opacity', 1);
      $newcontent = $(page.rip('content')).hide();
      $root.empty().append($newcontent);
      $newcontent.fadeIn();
      page.trigger('pageready');
    });

    router.bind('everyfetchfail', function(){
      alert('ajax error!');
      $root.css('opacity', 1);
    });

  });

});
</script>
</body>
</html>
